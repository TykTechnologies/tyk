---
name: "Mock Response"
tests:
  - desc: "Mock response - from oas to classic"
    source: oas
    input:
      paths:
        /test:
          get:
            operationId: "getTest200"
            responses:
              "200":
                description: "OK"
                content:
                  text/plain:
                    schema:
                      type: string
                    example: "Hello World"
      x-tyk-api-gateway:
        middleware:
          operations:
            getTest200:
              mockResponse:
                enabled: true
                code: 200
                body: "Hello World"
                headers:
                  - name: "Content-Type"
                    value: "text/plain"
    output:
      version_data:
        versions:
          "":
            extended_paths:
              mock_response:
                - disabled: false
                  path: "/test"
                  method: "GET"
                  code: 200
                  body: "Hello World"
                  headers:
                    Content-Type: "text/plain"
  - desc: "Mock response - from oas to classic - disabled"
    source: oas
    input:
      paths:
        /test:
          get:
            operationId: "getTest200"
            responses:
              "200":
                description: "OK"
                content:
                  text/plain:
                    schema:
                      type: string
      x-tyk-api-gateway:
        middleware:
          operations:
            getTest200:
              mockResponse:
                enabled: false
                code: 200
                body: "Hello World"
                headers:
                  - name: "Content-Type"
                    value: "text/plain"
    output:
      version_data:
        versions:
          "":
            extended_paths:
              mock_response:
                - disabled: true
                  path: "/test"
                  method: "GET"
                  code: 200
                  body: "Hello World"
                  headers:
                    Content-Type: "text/plain"
  - desc: "Mock response - from classic to oas"
    source: classic
    input:
      version_data:
        versions:
          "":
            extended_paths:
              mock_response:
                - disabled: false
                  path: "/test"
                  method: "GET"
                  code: 200
                  body: "Hello World"
                  headers:
                    Content-Type: "text/plain"
    output:
      paths:
        /test:
          get:
            operationId: "getTest200"
            responses:
              "200":
                description: "OK"
                content:
                  text/plain:
                    schema:
                      type: string
      x-tyk-api-gateway:
        middleware:
          operations:
            getTest200:
              mockResponse:
                enabled: true
                code: 200
                body: "Hello World"
                headers:
                  - name: "Content-Type"
                    value: "text/plain"
              ignoreAuthentication:
                enabled: true
  - desc: "Mock response - from classic to oas - disabled"
    source: classic
    input:
      version_data:
        versions:
          "":
            extended_paths:
              mock_response:
                - disabled: true
                  path: "/test"
                  method: "POST"
                  code: 201
                  body: "Hello World"
                  headers:
                    Content-Type: "text/plain"
    output:
      paths:
        /test:
          post:
            operationId: "postTest201"
            responses:
              "201":
                description: "OK"
                content:
                  text/plain:
                    schema:
                      type: string
      x-tyk-api-gateway:
        middleware:
          operations:
            postTest201:
              mockResponse:
                enabled: false
                code: 201
                body: "Hello World"
                headers:
                  - name: "Content-Type"
                    value: "text/plain"
              ignoreAuthentication:
                enabled: true
